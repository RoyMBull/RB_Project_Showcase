/** Wireless Transmitter/Reciever Module 
 * DOWNLOAD THE nRF24LO1 MODULE FROM HERE: https://github.com/maniacbug/RF24
 * Extract it to the libraries folder of the arduino IDE, located in Documents > Arduino > libraries 
 * VIDEO EXAMPLE: https://www.youtube.com/watch?v=1ibAiPNeQSI 

    Board Setup: (SEE THE IMAGE ATTATCHED)
        # Connect the first pin to ground
        # Connect the second pin to the 3.3v pin of the arduino (DO NOT USE 5V OR IT WILL DESTROY THE MODULE)
        # Connect the 3rd pin to digital pin 7 of the arduino (can be others if desired)
        # Connect the 4th pin to the digital 8 pin of the arduino (can also be others if desired)
        # Connect the 5th pin to the digital 13 pin of the arduino 
        # Connect the 6th pin to the digital 11 pin of the arduino 
        # Connect the 7th pin to the digital 12 pin of the arduino
        # Connect the 8th pin to the 

        radio.stopListening() // This sets the wireless tranciever module as transmitter
        radio.startListening() // This sets the wireless tranciever module as reciever

**/

#include <SPI.h>
#include <nRF24L01.h>
#include <RF24.h>

RF24 radio(7, 8); //Radio object

const byte DataChannel[][6] = {"00001", "00002"}; //address of the communication channel of the transmitter

//Commands
const char DroneCmd[35] = ""; //Drone Cmd being read
const char RecieverResponse[] = "CMD RECIEVED & EXECUTED!";

void setup()
{   
    Serial.begin(9600);
    radio.begin(); //Begins radio communicationn
    radio.openWritingPipe(DataChannel[1]); // Writes data to a defined address
    radio.openReadingPipe(1, DataChannel[0]); // Recieves response data 
    radio.setPALevel(RF24_PA_MIN); //Power Amplifier level
}

void loop()
{
    radio.startListening();

    if (radio.available())
    {
        bool RecievedData = radio.read(&DroneCmd, sizeof(DroneCmd));
        Serial.println(DroneCmd);
        delay(1000);
        /**
              if (RecievedData == true)
              {
                  //Execute the command                 
              }
             
         */

        if (RecievedData == true)
        {
            radio.stopListening();
            bool WriteResponse = radio.write(&RecieverResponse, sizeof(RecieverResponse));
            delay(1000);

            if (WriteResponse == true)
            {
              Serial.println("Data Sent!");
            }
        }

        
    }
       
}